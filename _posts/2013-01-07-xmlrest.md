---
layout: post
title: "XML REST API: Реалии работы с реальными системами"
published: false
---

Так получилось, что я сейчас работаю с REST XML API. Сам по себе, API не так красив, как хотелось бы. Документация ужасна, а тот факт, что есть необходимость использовать XML...

Начнём с того, что при создании структур недокументированного API, у значения каждого поля есть 3 возможных состояния:

* **Not set** - Значение не задано, не следует указывать поле в структуре
* **Value** - Значение задано, передаём
* **Null** - Значение отсутствует, передаём как нулевое(`""` / `0` / `false`)

Например в случае с GitHub, документация API v3 хорошо упрощает работу программиста и улучшает качество работы API:

    Blank fields are included as `null` instead of being omitted.

<!-- more -->

Увы, у меня в наличии есть только достаточно убогая документация не самого лучшего API, где в некоторых случаях указано что поле может быть не указано.

Ухудшает положение тот факт, что в наличии есть только **XML**, который мало того что имеет названия полей не самые удачные, так ещё и структуру в разных случаях в разном виде: в одном варианте одной и той же структуры(например, `s_mini` и `s_full`) одно поле указано как аттрибут, а в другом случае - как `inner text`.

Я использую Python для интеграции сего API и использования его в системе. Как и любому "питонисту", да даже "рубисту"(хотя там больше популярен культ yaml), мне было горестно использовать XML вместо json. Но что поделать.

Добавляет хлопот и тот факт, что xml не является типизированным, но конечная система принимает ряд значений для определённых полей: `true` или `false` - но для Python это, конечно, просто строки.

И всё это надо оформить так, чтобы в коде была ясность и не было вопросов при использовании? Пфф, да нет проблем...